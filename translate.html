<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chinese Speech â†’ English PDF</title>

<!-- jsPDF CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f1f3f6;
  padding: 20px;
}
h2 {
  text-align: center;
}
.box {
  background: #fff;
  padding: 15px;
  border-radius: 8px;
  margin-bottom: 15px;
}
textarea {
  width: 100%;
  height: 110px;
  padding: 10px;
  font-size: 15px;
}
button {
  padding: 10px 15px;
  font-size: 15px;
  cursor: pointer;
}
</style>
</head>

<body>

<h2>ğŸ™ï¸ Chinese Speech â†’ Auto English â†’ PDF</h2>

<div class="box">
  <button onclick="startSpeech()">ğŸ¤ Chinese Bolna Start Karein</button>
  <textarea id="sourceText" placeholder="Chinese text yahan aayega..."></textarea>
</div>

<div class="box">
  <textarea id="englishText" placeholder="English translation yahan auto aayegi..."></textarea>
</div>

<div class="box">
  <button onclick="downloadPDF()">â¬‡ï¸ PDF Download</button>
</div>

<script>
// ğŸ¤ Speech to Text (Chinese)
function startSpeech() {
  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  const recognition = new SpeechRecognition();

  recognition.lang = "zh-CN"; // ğŸ‡¨ğŸ‡³ Chinese Mandarin
  recognition.start();

  recognition.onresult = function(event) {
    let chinese = event.results[0][0].transcript;
    document.getElementById("sourceText").value = chinese;
    autoTranslate(chinese);
  };

  recognition.onerror = function() {
    alert("Speech recognition error. Chrome use karein.");
  };
}

// ğŸŒ Chinese â†’ English (MyMemory API)
function autoTranslate(text) {
  let url = "https://api.mymemory.translated.net/get?q="
            + encodeURIComponent(text)
            + "&langpair=zh-CN|en";

  fetch(url)
    .then(res => res.json())
    .then(data => {
      document.getElementById("englishText").value =
        data.responseData.translatedText;
    })
    .catch(() => {
      document.getElementById("englishText").value =
        "Translation failed";
    });
}

// ğŸ“„ PDF Download
function downloadPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  let text = document.getElementById("englishText").value || "No translated text";

  doc.text(text, 10, 10, { maxWidth: 180 });
  doc.save("translated_document.pdf");
}
</script>

</body>
</html>
